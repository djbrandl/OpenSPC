{
  "proposal_type": "create_task",
  "from_role": "project-manager",
  "timestamp": "2026-02-04T12:00:00Z",
  "target_role": "senior-dev",
  "priority": "high",
  "payload": {
    "task": {
      "subject": "Implement Polymorphic Characteristic Configuration Backend",
      "description": "Implement the backend infrastructure for polymorphic characteristic configuration as specified in POLYMORPHIC_CONFIG_IMPLEMENTATION.md. This enables ManualConfig (scheduled due tasks for operators) and TagConfig (automated MQTT/PLC data ingestion) strategies per characteristic.",
      "phases": [
        {
          "phase": "1.1",
          "name": "Pydantic Schemas",
          "file": "backend/src/openspc/api/schemas/characteristic_config.py",
          "description": "Create discriminated union schemas for ManualConfig and TagConfig with nested schedule/trigger types"
        },
        {
          "phase": "1.2",
          "name": "Database Model",
          "file": "backend/src/openspc/db/models/characteristic_config.py",
          "description": "Create CharacteristicConfig model storing config as JSON blob with relationship to Characteristic"
        },
        {
          "phase": "1.3",
          "name": "Alembic Migration",
          "file": "backend/alembic/versions/20260205_add_characteristic_config.py",
          "description": "Create migration for characteristic_config table"
        },
        {
          "phase": "1.4",
          "name": "Repository",
          "file": "backend/src/openspc/db/repositories/characteristic_config.py",
          "description": "Create repository with JSON serialization/parsing for polymorphic configs"
        },
        {
          "phase": "1.5",
          "name": "API Endpoints",
          "file": "backend/src/openspc/api/v1/characteristic_config.py",
          "description": "Create GET/PUT/DELETE endpoints for /characteristics/{id}/config"
        }
      ],
      "acceptance_criteria": [
        "Pydantic schemas validate ManualConfig with schedule types (INTERVAL, SHIFT, CRON, BATCH_START)",
        "Pydantic schemas validate TagConfig with trigger types (ON_UPDATE, ON_EVENT, ON_VALUE_CHANGE)",
        "CharacteristicConfig model stores JSON blob with proper relationship to Characteristic",
        "Migration creates characteristic_config table with index on characteristic_id",
        "Repository provides upsert, get_config_parsed, and get_all_active_manual methods",
        "API validates config_type matches characteristic provider_type (MANUAL/TAG)",
        "Unit tests cover schema validation and repository operations"
      ],
      "dependencies": [
        "frontend/src/components/ScheduleConfigSection.tsx (already created)"
      ],
      "reference_doc": "POLYMORPHIC_CONFIG_IMPLEMENTATION.md"
    }
  },
  "justification": "The polymorphic configuration system is essential for the due task feature (manual data entry scheduling) and future tag provider enhancements. The frontend ScheduleConfigSection UI already exists but currently has no backend persistence. This implementation enables operators to have scheduled measurement reminders and supports automated data collection configuration.",
  "approval": {
    "approved_by": "ceo",
    "approved_at": "2026-02-04T14:00:00Z",
    "notes": "Approved for implementation. This is a foundational feature for scheduled data entry and tag provider configuration. Senior Dev to implement backend phases 1.1-1.5 as specified."
  }
}
